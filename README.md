# frameGenerator — генератор каркасов для протезов клапана сердца

**frameGenerator** — экспериментальный CAD→CAE конвейер для параметрической генерации каркасов (frames) транс-катетерных клапанов с экспортом в `STEP`, дальнейшим построением и запуском расчётной модели в Abaqus, постобработкой метрик и возможной оптимизацией параметров.

> Репозиторий находится в активной разработке; интерфейсы и структура могут изменяться без обратной совместимости.

---

## Содержание

- [Ключевые возможности](#ключевые-возможности)
- [Статус проекта](#статус-проекта)
- [Архитектура и рабочий поток](#архитектура-и-рабочий-поток)
- [Структура репозитория](#структура-репозитория)
- [Установка](#установка)
- [Лицензия](#лицензия)

---

## Ключевые возможности

- Параметрическая генерация 3D-геометрии каркаса.
- Экспорт CAD в формат `*.step` (AP214/242) для межсистемного обмена.
- Скриптовая сборка CAE-модели в Abaqus (импорт `STEP`, материалы, сетка, контакт, НДС) и формирование `*.inp`/`*.cae`.
- Постпроцессинг расчётов и сбор метрик (напряжения/деформации, радиальная жёсткость/сила, масса, зоны перегрузки).
- Задел под параметрическое исследование/оптимизацию.

---

## Статус проекта

Текущие задачи в корневом README репозитория формулируются как:

- Frame generator parametrisation  
- Frame export with .STEP  
- Abaqus import STEP  
- Abaqus create `.inp` and/or `.cae`  
- Abaqus script optimisation  
- Connect parameters between frame generation and Abaqus script (JSON/XML/TXT)  
- Some sort of optimisator

---

## Архитектура и рабочий поток

Высокоуровневый конвейер: **параметризация → генерация → экспорт STEP → CAE в Abaqus → метрики → (опцион.) оптимизация**.

```mermaid
flowchart LR
  A[config/*\nпараметры] -->|чтение| B[main.py\nоркестратор]
  subgraph U[utils/*]
    U1[геом. примитивы\nи вспомогательные функции]
  end
  B --> U1 --> C[3D-модель в памяти]
  C -->|экспорт| D[frame.step]
  D --> E[Abaqus Python-скрипт\nимпорт STEP, материалы,\nконтакт, сетка, НДС]
  E --> F[*.cae / *.inp]
  F --> G[Abaqus solver]
  G --> H[*.odb результаты]
  H --> I[постпроцессинг →\nметрики CSV/JSON]
  I -->|опционально| K[оптимизатор] -->|обновляет| A
````

**Границы системы:** генерация и экспорт — в этом репозитории; Abaqus и его API — внешняя зависимость.

---

## Структура репозитория

```
frameGenerator/
├─ config/           # входные файлы с параметрами геометрии (JSON/YAML и т.п.)
├─ utils/            # строительные блоки/утилиты для генерации геометрии
├─ main.py           # точка входа, оркестрация конвейера
├─ requirements.txt  # зависимости Python (см. установку)
└─ README.md         # этот файл
```

---

## Установка

Требуется Python ≥ 3.10

```bash
# 1) Клонирование
git clone https://github.com/onisps/frameGenerator.git
cd frameGenerator

# 2) Установка зависимостей
pip install -r requirements.txt
```

> Для этапа CAE потребуется установленный **Abaqus** (Standard/Explicit) с лицензией и доступом к Python API Abaqus. 
---

## Метрики и результаты

На выходе постпроцессинга ожидаются (перечень может расширяться):

* Механика: максимальные/средние эквивалентные напряжения (σ_eq), деформации, карты «горячих зон».
* Жёсткость: радиальная сила/жёсткость по выбранному протоколу компрессии/раскрытия.
* Масса/площадь материала.
* Сводные отчёты: `results.csv`/`results.json`.

---

## Лицензия

TBA
